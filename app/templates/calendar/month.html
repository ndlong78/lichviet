{% extends "base.html" %}

{% block title %}Lịch tháng{% endblock %}

{% block content %}
<div class="calendar-container">
    <div class="calendar-header">
        <div class="navigation-buttons">
            <a href="{{ url_for('month_view', year=prev_year, month=prev_month) }}" class="btn">‹</a>
            <h2>Tháng {{ month }}/{{ year }}</h2>
            <a href="{{ url_for('month_view', year=next_year, month=next_month) }}" class="btn">›</a>
        </div>
        <div class="view-buttons">
            <a href="{{ url_for('month_view') }}" class="btn active">Tháng</a>
            <a href="{{ url_for('week_view') }}" class="btn">Tuần</a>
            <a href="{{ url_for('year_view') }}" class="btn">Năm</a>
        </div>
    </div>

    <div id="calendar"></div>

    <button class="fab" onclick="location.href='{{ url_for('new_event') }}'">+</button>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: '{{ year }}-{{ month }}-01',
        headerToolbar: false,
        events: '{{ url_for('get_events') }}',
        eventClick: function(info) {
            location.href = '{{ url_for('edit_event', id='') }}'